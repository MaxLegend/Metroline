package metroline.core.world.event;

import metroline.core.world.GameWorld;
import metroline.core.world.event.base.LocalWorldEvent;
import metroline.objects.enums.StationType;
import metroline.objects.gameobjects.Station;
import metroline.util.MetroLogger;

/**
 * –°–æ–±—ã—Ç–∏–µ –∑–∞—Ç–æ–ø–ª–µ–Ω–∏—è —Å—Ç–∞–Ω—Ü–∏–∏
 */
public class FloodedStationEvent extends LocalWorldEvent {

    public FloodedStationEvent(GameWorld world, Station targetStation) {
        super(world,
                targetStation,
                "event.station_flood",
                "event.station_flood_desc",
                240000, // 4 –º–∏–Ω—É—Ç—ã –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
                0.8f,   // –≤—ã—Å–æ–∫–∞—è —Å–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å
                true,   // –±–ª–æ–∫–∏—Ä—É–µ—Ç —Å—Ç–∞–Ω—Ü–∏—é
                0.0f,   // –¥–æ—Ö–æ–¥–æ–≤ –Ω–µ—Ç
                3.0f    // –∏–∑–Ω–æ—Å —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –≤ 3 —Ä–∞–∑–∞
        );
    }

    @Override
    public void applyEffects() {
        super.applyEffects();
        MetroLogger.logInfo("üåä –ó–ê–¢–û–ü–õ–ï–ù–ò–ï –Ω–∞ —Å—Ç–∞–Ω—Ü–∏–∏ '" + getTargetStation().getName() + "'! –°—Ç–∞–Ω—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∞ –¥–æ –æ—Ç–∫–∞—á–∫–∏ –≤–æ–¥—ã.");

        // –ú–µ–Ω—è–µ–º —Ç–∏–ø —Å—Ç–∞–Ω—Ü–∏–∏ –Ω–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –¥–ª—è –∑–∞—Ç–æ–ø–ª–µ–Ω–∏—è
        getTargetStation().setType(StationType.DROWNED);
    }

    @Override
    public void removeEffects() {
        // –ü–æ—Å–ª–µ –∑–∞—Ç–æ–ø–ª–µ–Ω–∏—è —Å—Ç–∞–Ω—Ü–∏—è —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ä–∞–∑—Ä—É—à–µ–Ω–Ω–æ–π
        getTargetStation().setType(StationType.DROWNED);
        MetroLogger.logInfo("–ó–∞—Ç–æ–ø–ª–µ–Ω–∏–µ –Ω–∞ —Å—Ç–∞–Ω—Ü–∏–∏ '" + getTargetStation().getName() + "' –ª–∏–∫–≤–∏–¥–∏—Ä–æ–≤–∞–Ω–æ. –°—Ç–∞–Ω—Ü–∏—è —Ç—Ä–µ–±—É–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è.");

        // –ù–µ –≤—ã–∑—ã–≤–∞–µ–º super.removeEffects() —á—Ç–æ–±—ã –Ω–µ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∏—Å—Ö–æ–¥–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    }
}
